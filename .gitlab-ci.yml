image: registry.gitlab.com/brigittarucz/examApp

stages:
  - build
  - test
  - deploy

cache:
  paths:
    - node_modules/

env_setup:
  stage: build
  script:
    - npm install
  artifacts:
    paths:
      - node_modules/

# testing:
  # stage: test
  # script:
    # - eslint .
    # - npm test

pages:
  # stage: deploy
  # script:
  #   - mkdir .public
  #   - cp -r * .public
  #   - mv .public public
  # artifacts:
  #   paths:
  #     - public
  # only:
  #   - master
  image: python:3.8
  stage: deploy
  script:
      - pip install -r requirements.txt
      - make clean
      - make html
      - mv _build/html public
  artifacts:
      paths:
          - public
  only:
      - app_cicd

